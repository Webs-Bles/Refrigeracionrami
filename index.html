import React, { useState, useEffect, useRef } from 'react';
import { 
  Snowflake, 
  Wrench, 
  ShieldCheck, 
  Phone, 
  MapPin, 
  CalendarCheck, 
  ChevronRight,
  Menu,
  X,
  Instagram,
  Facebook,
  MessageCircle,
  ThermometerSnowflake,
  Refrigerator,
  UserCheck,
  Award,
  CheckCircle2
} from 'lucide-react';

// Hook para detectar cuando un elemento entra en pantalla (Scroll Reveal)
const useScrollReveal = () => {
  const [isVisible, setIsVisible] = useState(false);
  const domRef = useRef();

  useEffect(() => {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.unobserve(domRef.current);
        }
      });
    }, { threshold: 0.1 });

    const currentRef = domRef.current;
    if (currentRef) {
      observer.observe(currentRef);
    }

    return () => {
      if (currentRef) observer.unobserve(currentRef);
    };
  }, []);

  return [domRef, isVisible];
};

// Componente Wrapper para animaciones de entrada
const RevealItem = ({ children, className = "", delay = 0 }) => {
  const [ref, isVisible] = useScrollReveal();
  
  return (
    <div
      ref={ref}
      className={`${className} transition-all duration-1000 ease-out ${
        isVisible 
          ? 'opacity-100 translate-y-0' 
          : 'opacity-0 translate-y-12'
      }`}
      style={{ transitionDelay: `${delay}ms` }}
    >
      {children}
    </div>
  );
};

const App = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);
  const [currentSlide, setCurrentSlide] = useState(0);

  // Imágenes de alta calidad con enfoque técnico serio
  const backgroundImages = [
    "https://images.unsplash.com/photo-1581094288338-2314dddb7ead?auto=format&fit=crop&q=80&w=1920",
    "https://images.unsplash.com/photo-1621905252507-b354bcadcabc?auto=format&fit=crop&q=80&w=1920",
    "https://images.unsplash.com/photo-1631543533410-2960c2d8ee00?auto=format&fit=crop&q=80&w=1920"
  ];

  const phoneNumber = "5492216154694";
  const whatsappMsg = encodeURIComponent("Hola Rami! Quisiera solicitar un presupuesto para un servicio técnico.");
  const whatsappUrl = `https://wa.me/${phoneNumber}?text=${whatsappMsg}`;

  useEffect(() => {
    const timer = setInterval(() => {
      setCurrentSlide((prev) => (prev + 1) % backgroundImages.length);
    }, 6000);
    return () => clearInterval(timer);
  }, []);

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 20);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const services = [
    {
      title: 'Aires Acondicionados',
      icon: <Snowflake className="w-10 h-10" />,
      items: ['Instalaciones Matriculadas', 'Mantenimiento y Carga de Gas', 'Reparación de Placas', 'Limpieza Integral'],
    },
    {
      title: 'Heladeras y Freezers',
      icon: <Refrigerator className="w-10 h-10" />,
      items: ['Service No Frost', 'Cambio de Compresores', 'Carga de Gas Ecológico', 'Fugas y Burletes'],
    },
    {
      title: 'Comercial e Industrial',
      icon: <Wrench className="w-10 h-10" />,
      items: ['Cámaras Frigoríficas', 'Exhibidoras y Bateas', 'Mantenimiento Preventivo', 'Urgencias 24hs'],
    }
  ];

  return (
    <div className="min-h-screen bg-white text-slate-900 font-sans selection:bg-blue-100 overflow-x-hidden">
      
      {/* --- Navbar --- */}
      <nav className={`fixed w-full z-50 transition-all duration-500 ${scrolled ? 'bg-slate-900/95 backdrop-blur-md py-3 shadow-2xl border-b border-white/5' : 'bg-transparent py-6'}`}>
        <div className="container mx-auto px-6 flex justify-between items-center">
          <div className="flex items-center gap-3">
            <div className="bg-blue-600 p-2 rounded-xl text-white shadow-lg shadow-blue-600/20">
              <ThermometerSnowflake size={26} />
            </div>
            <div className="leading-none">
              <span className="text-2xl font-black tracking-tighter block uppercase text-white">Rami<span className="text-blue-500">Refri</span></span>
              <span className="text-[9px] font-bold tracking-[0.2em] uppercase text-blue-400/80">Refrigeración Profesional</span>
            </div>
          </div>

          <div className="hidden md:flex items-center gap-10 text-[11px] font-bold uppercase tracking-[0.15em] text-white/70">
            <a href="#inicio" className="hover:text-blue-400 transition-colors">Inicio</a>
            <a href="#servicios" className="hover:text-blue-400 transition-colors">Servicios</a>
            <a href="#contacto" className="hover:text-blue-400 transition-colors">Contacto</a>
            <a href={whatsappUrl} className="bg-blue-600 text-white px-7 py-3 rounded-full hover:bg-blue-500 transition-all shadow-xl shadow-blue-600/30 flex items-center gap-2 normal-case font-black tracking-tight text-sm">
              <Phone size={16} /> 221 615-4694
            </a>
          </div>

          <button className="md:hidden text-white" onClick={() => setIsMenuOpen(!isMenuOpen)}>
            {isMenuOpen ? <X size={28} /> : <Menu size={28} />}
          </button>
        </div>
      </nav>

      {/* --- Hero Section --- */}
      <section id="inicio" className="relative min-h-[90vh] md:min-h-screen flex items-center pt-20 overflow-hidden bg-slate-950">
        <div className="absolute inset-0 z-0">
          {backgroundImages.map((img, index) => (
            <div
              key={index}
              className={`absolute inset-0 transition-opacity duration-[2000ms] ease-in-out ${index === currentSlide ? 'opacity-30' : 'opacity-0'}`}
              style={{
                backgroundImage: `url('${img}')`,
                backgroundSize: 'cover',
                backgroundPosition: 'center',
                mixBlendMode: 'luminosity'
              }}
            />
          ))}
          <div className="absolute inset-0 bg-gradient-to-tr from-slate-950 via-slate-950/90 to-blue-900/20"></div>
          <div className="absolute top-1/4 -right-20 w-96 h-96 bg-blue-600/10 blur-[120px] rounded-full"></div>
          <div className="absolute bottom-1/4 -left-20 w-80 h-80 bg-blue-500/10 blur-[100px] rounded-full"></div>
        </div>
        
        <div className="container mx-auto px-6 grid grid-cols-1 lg:grid-cols-12 gap-12 items-center relative z-10">
          <div className="lg:col-span-8 animate-in fade-in slide-in-from-left duration-1000">
            <div className="inline-flex items-center gap-3 px-5 py-2 rounded-full bg-blue-600/10 border border-blue-500/30 text-blue-400 text-xs font-black uppercase tracking-widest mb-8">
              <span className="relative flex h-2 w-2">
                <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                <span className="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span>
              </span>
              Refrigeración Rami: Service en La Plata
            </div>
            
            <h1 className="text-5xl md:text-8xl font-black text-white leading-[0.9] mb-8 tracking-tighter">
              El clima ideal <br/>
              con <span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600 italic">Refrigeración Rami</span><br/>
              Expertos en Service.
            </h1>
            
            <p className="text-lg md:text-xl text-slate-400 mb-12 max-w-2xl leading-relaxed">
              Reparación, instalación y mantenimiento preventivo con repuestos originales y <span className="text-white font-bold">garantía escrita</span> por Ramiro, tu técnico de confianza.
            </p>
            
            <div className="flex flex-col sm:flex-row gap-5">
              <a href={whatsappUrl} className="flex items-center justify-center gap-4 bg-blue-600 text-white px-10 py-5 rounded-2xl font-black text-lg hover:bg-blue-500 transition-all shadow-2xl shadow-blue-600/40 group">
                <MessageCircle size={26} className="fill-current" /> 
                <span>CONSULTAR A RAMI</span>
                <ChevronRight className="group-hover:translate-x-1 transition-transform" />
              </a>
              <div className="flex items-center gap-5 px-8 py-5 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-md">
                <div className="p-3 bg-white/5 rounded-xl">
                  <ShieldCheck className="text-blue-400" size={30} />
                </div>
                <div className="text-left">
                  <p className="font-black text-white text-sm tracking-tight leading-none mb-1 uppercase">Soporte Directo</p>
                  <p className="text-slate-400 text-xs font-medium">Atención de Ramiro</p>
                </div>
              </div>
            </div>
          </div>
          
          <div className="hidden lg:block lg:col-span-4 relative">
             <div className="relative z-10 p-1 bg-gradient-to-b from-blue-500/20 to-transparent rounded-[3rem]">
                <div className="bg-slate-900/60 backdrop-blur-2xl p-10 rounded-[2.8rem] border border-white/10 shadow-3xl">
                   <div className="space-y-8">
                      <div className="flex items-center gap-4">
                        <div className="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center text-white shadow-lg">
                          <Phone size={20} />
                        </div>
                        <div>
                          <p className="text-[10px] font-black text-slate-500 uppercase tracking-widest leading-none mb-1">Contacto Rami</p>
                          <p className="text-white font-black text-lg tracking-tight">221 615-4694</p>
                        </div>
                      </div>
                      <div className="h-px bg-white/5 w-full"></div>
                      <div className="space-y-4">
                        <p className="text-white font-black text-sm uppercase italic">Zonas de Cobertura:</p>
                        <div className="flex flex-wrap gap-2">
                           {['La Plata', 'City Bell', 'Gonnet', 'Berisso'].map(z => (
                             <span key={z} className="px-3 py-1 bg-white/5 rounded-lg text-slate-400 text-[10px] font-bold uppercase">{z}</span>
                           ))}
                        </div>
                      </div>
                   </div>
                </div>
             </div>
          </div>
        </div>
        <div className="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-white to-transparent"></div>
      </section>

      {/* --- Servicios --- */}
      <section id="servicios" className="py-24 bg-white relative z-10">
        <div className="container mx-auto px-6">
          <RevealItem className="text-center max-w-3xl mx-auto mb-20">
            <h2 className="text-4xl md:text-6xl font-black text-slate-950 mb-6 tracking-tighter uppercase leading-none italic">
              Excelencia en <br/><span className="text-blue-600 underline decoration-blue-100 underline-offset-8">Mano de Obra</span>
            </h2>
            <p className="text-slate-500 text-lg font-medium leading-relaxed">
              En Refrigeración Rami ofrecemos un servicio integral para que tu hogar o comercio mantenga el clima ideal todo el año.
            </p>
          </RevealItem>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-10">
            {services.map((service, i) => (
              <RevealItem key={i} delay={200 * i}>
                <div className="bg-slate-50 p-12 rounded-[3.5rem] hover:bg-white hover:shadow-2xl hover:shadow-blue-200/50 transition-all duration-500 group border border-transparent hover:border-blue-100 h-full">
                  <div className="text-blue-600 mb-10 group-hover:scale-110 transition-transform duration-500">{service.icon}</div>
                  <h3 className="text-2xl font-black mb-8 uppercase tracking-tight text-slate-900 leading-none">{service.title}</h3>
                  <ul className="space-y-5">
                    {service.items.map((item, idx) => (
                      <li key={idx} className="flex items-center gap-4 text-slate-600 text-sm font-bold">
                        <CheckCircle2 size={18} className="text-blue-500 shrink-0" />
                        {item}
                      </li>
                    ))}
                  </ul>
                </div>
              </RevealItem>
            ))}
          </div>
        </div>
      </section>

      {/* --- Ubicación y Contacto --- */}
      <section id="contacto" className="py-24 bg-slate-50 overflow-hidden">
        <div className="container mx-auto px-6">
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-20 items-center">
             <RevealItem>
               <h2 className="text-4xl font-black mb-8 tracking-tighter uppercase text-slate-900 italic">Donde <span className="text-blue-600">Trabajamos</span></h2>
               <p className="text-slate-500 font-medium text-lg mb-10">Refrigeración Rami brinda cobertura total en el partido de La Plata con móviles equipados para resolver en el lugar.</p>
               
               <div className="grid grid-cols-2 gap-8 mb-10">
                 {['La Plata Centro', 'Tolosa', 'City Bell', 'Villa Elisa', 'Los Hornos', 'Gonnet'].map(city => (
                   <div key={city} className="flex items-center gap-3">
                     <div className="w-2 h-2 rounded-full bg-blue-600"></div>
                     <span className="text-xs font-black uppercase text-slate-700 tracking-widest">{city}</span>
                   </div>
                 ))}
               </div>
               
               <div className="p-8 bg-white rounded-3xl border border-slate-200 shadow-sm flex items-start gap-6">
                 <MapPin className="text-blue-600 shrink-0" size={32} />
                 <div>
                   <p className="font-black uppercase text-sm mb-1">Base de Operaciones</p>
                   <p className="text-slate-500 font-medium">La Plata y alrededores.</p>
                 </div>
               </div>
             </RevealItem>
             
             <RevealItem delay={300}>
               <div className="relative group">
                 <div className="absolute -inset-4 bg-blue-600/10 rounded-[4rem] blur-2xl group-hover:bg-blue-600/20 transition-all"></div>
                 <div className="relative aspect-video bg-slate-900 rounded-[3rem] overflow-hidden shadow-2xl border-4 border-white">
                    <img 
                      src="https://images.unsplash.com/photo-1526778548025-fa2f459cd5ce?auto=format&fit=crop&q=80&w=800" 
                      className="w-full h-full object-cover opacity-60 grayscale hover:grayscale-0 transition-all duration-700"
                      alt="Ubicación"
                    />
                    <div className="absolute inset-0 flex flex-col items-center justify-center text-center p-8 bg-blue-950/40 backdrop-blur-sm">
                       <div className="w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-white mb-6 animate-bounce shadow-3xl">
                         <MapPin size={40} />
                       </div>
                       <p className="font-black text-white text-xl uppercase tracking-tighter">Zona de Cobertura Rami</p>
                    </div>
                 </div>
               </div>
             </RevealItem>
          </div>
        </div>
      </section>

      {/* --- Footer --- */}
      <footer className="bg-slate-950 text-white pt-24 pb-12 px-6">
        <div className="container mx-auto">
          <div className="grid grid-cols-1 md:grid-cols-4 gap-16 mb-20">
            <div className="md:col-span-2">
              <div className="flex items-center gap-3 mb-8">
                <div className="bg-blue-600 p-1.5 rounded-lg text-white">
                  <ThermometerSnowflake size={24} />
                </div>
                <span className="text-3xl font-black tracking-tighter uppercase">Rami<span className="text-blue-500">Refri</span></span>
              </div>
              <p className="text-slate-400 text-lg font-medium leading-relaxed max-w-sm">
                Comprometidos con la calidad y la transparencia en refrigeración doméstica y comercial bajo la dirección de Ramiro.
              </p>
              <div className="flex gap-4 mt-8">
                <div className="w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-slate-400 hover:bg-blue-600 hover:text-white transition-all cursor-pointer">
                  <Instagram size={20} />
                </div>
                <div className="w-12 h-12 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-slate-400 hover:bg-blue-600 hover:text-white transition-all cursor-pointer">
                  <Facebook size={20} />
                </div>
              </div>
            </div>

            <div>
              <h4 className="font-black uppercase tracking-[0.2em] text-[10px] mb-8 text-blue-500">Contacto</h4>
              <ul className="space-y-6">
                <li className="flex flex-col">
                  <span className="text-[10px] uppercase font-black text-slate-500 tracking-widest mb-1">WhatsApp</span>
                  <a href={whatsappUrl} className="text-lg font-bold hover:text-blue-400 transition-colors">221 615-4694</a>
                </li>
                <li className="flex flex-col">
                  <span className="text-[10px] uppercase font-black text-slate-500 tracking-widest mb-1">Horarios</span>
                  <span className="text-lg font-bold">Lunes a Sábados 8 a 20hs</span>
                </li>
              </ul>
            </div>

            <div>
              <h4 className="font-black uppercase tracking-[0.2em] text-[10px] mb-8 text-blue-500">Información</h4>
              <ul className="space-y-4 text-xs font-black uppercase tracking-widest text-slate-400">
                <li className="flex items-center gap-2"><Award size={14} className="text-blue-600"/> Servicio Personalizado</li>
                <li className="flex items-center gap-2"><Award size={14} className="text-blue-600"/> Service Multimarca</li>
                <li className="flex items-center gap-2"><Award size={14} className="text-blue-600"/> Garantía Escrita</li>
              </ul>
            </div>
          </div>
          
          <div className="pt-10 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-6 text-slate-500 text-[10px] font-black uppercase tracking-widest">
            <p>© 2024 REFRIGERACIÓN RAMI • LA PLATA.</p>
            <p className="text-slate-600">Confianza y Calidad</p>
          </div>
        </div>
      </footer>

      {/* Botón WhatsApp Flotante */}
      <a 
        href={whatsappUrl} 
        target="_blank" 
        rel="noopener noreferrer"
        className="fixed bottom-10 right-10 z-[100] bg-blue-600 text-white px-6 py-4 rounded-2xl shadow-[0_20px_50px_rgba(37,99,235,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center gap-3 group"
      >
        <div className="bg-white/20 p-2 rounded-lg">
          <MessageCircle size={24} className="fill-current" />
        </div>
        <div className="flex flex-col items-start leading-none">
          <span className="text-[10px] font-black uppercase tracking-widest opacity-80 mb-1">Hablá con Ramiro</span>
          <span className="font-black text-sm uppercase">¡Pedí Presupuesto!</span>
        </div>
      </a>

      {/* Menú Mobile */}
      {isMenuOpen && (
        <div className="fixed inset-0 z-[60] bg-slate-950 flex flex-col p-8 animate-in fade-in zoom-in-95 duration-300">
          <div className="flex justify-between items-center mb-20">
             <div className="flex items-center gap-2">
                <div className="bg-blue-600 p-1 rounded-lg text-white">
                  <ThermometerSnowflake size={24} />
                </div>
                <span className="font-black text-2xl uppercase tracking-tighter text-white">RamiRefri</span>
             </div>
             <button onClick={() => setIsMenuOpen(false)} className="p-2 text-white"><X size={32} /></button>
          </div>
          <nav className="space-y-8">
            <a href="#inicio" onClick={() => setIsMenuOpen(false)} className="block text-5xl font-black uppercase tracking-tighter text-white hover:text-blue-500">Inicio</a>
            <a href="#servicios" onClick={() => setIsMenuOpen(false)} className="block text-5xl font-black uppercase tracking-tighter text-white hover:text-blue-500">Servicios</a>
            <a href="#contacto" onClick={() => setIsMenuOpen(false)} className="block text-5xl font-black uppercase tracking-tighter text-blue-600">Contacto</a>
          </nav>
          <div className="mt-auto">
             <a href={whatsappUrl} className="w-full block text-center py-6 bg-blue-600 text-white rounded-2xl font-black text-xl uppercase shadow-2xl">
               HABLAR CON RAMI
             </a>
          </div>
        </div>
      )}
    </div>
  );
};

export default App;
